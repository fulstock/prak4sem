<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
<h3>Problem mz05-1: mz05-1</h3>

<p>Опишите абстрактный класс <tt>Figure</tt>, который будет корнем полиморфной
иерархии классов, описывающих двухмерные фигуры.</p>

<p>Класс должен определять метод <tt>get_square</tt> для перекрытия в производных классах. Метод будет возвращать площадь соответствующей фигуры.</p>

<h3>Problem up05-2: mz05-2 (upsolving)</h3>

<p>Дан абстрактный класс <tt>Figure</tt> (см. предыдущую задачу).</p>

<p>Опишите классы <tt>Rectangle</tt>, <tt>Square</tt>, <tt>Circle</tt>,
наследующие класс <tt>Figure</tt>. Классы должны хранить параметры фигуры,
а площадь каждый раз должна вычисляться. Для окружности хранится ее радиус.</p>

<p>Для создания объектов соответствующих классов каждый класс должен определять
статический метод <tt>make</tt>, который в качестве параметра принимает строку <tt>std::string</tt>.
Метод <tt>make</tt> возвращает указатель на объект, созданный в куче.</p>

<p>Для класса <tt>Rectangle</tt> строка содержит два вещественных числа, разделенных пробелами, а для классов <tt>Square</tt> и
<tt>Circle</tt> &mdash; одно вещественное число.</p>

<p>За ошибки компиляции будут сниматься баллы.</p>

<h3>Problem up05-3: mz05-3 (upsolving)</h3>

<p>Даны классы <tt>Figure</tt>, <tt>Rectangle</tt>, <tt>Square</tt>, <tt>Circle</tt> (см. предыдущие задачи).</p>

<p>Дополнительно для всех фигур определен метод <tt>to_string</tt>, который возвращает строку <tt>std::string</tt>,
описывающую данную фигуру.</p>

<p>Для класса <tt>Rectangle</tt> строка имеет вид</p>
<pre>R WIDTH HEIGHT</pre>

<p>Для класса <tt>Square</tt> строка имеет вид</p>
<pre>S SIZE</pre>

<p>Для класса <tt>Circle</tt> строка имеет вид</p>
<pre>C RADUIS</pre>

<p>Где <tt>WIDTH</tt>, <tt>HEIGHT</tt>, <tt>SIZE</tt>, <tt>RADUIS</tt> &mdash; соответствующие параметры фигуры.</p>

<p>Напишите программу. На стандартном потоке ввода подаются описания фигур, строго по одной фигуре на строку текста.
Строка описания фигуры имеет вид</p>
<pre>
TYPE PARAMS
</pre>

<p>Где <tt>TYPE</tt> &mdash; это <tt>R</tt>, <tt>S</tt> или <tt>C</tt> обозначающие соответствующие фигуры.
<tt>PARAMS</tt> &mdash; это параметры создания фигуры, без изменения передаваемые в функцию <tt>make</tt>.
Элементы в строке могут разделяться произвольным количеством пробельных символов.</p>

<p>На стандартный поток вывода выведите фигуры, отсортированные в порядке возрастания площади фигур.
Если несколько фигур имеют равную площадь, сохраняется их относительный порядок из входных данных.</p>

<p><b>Указания</b></p>

<p>Не используйте глобальные переменные!</p>

<p>Для чтения строки текста из входного потока используйте <tt>std::getline</tt>.</p>

<p>Для покомпонентного чтения из строки можете использовать <tt>std::istringstream</tt> (опционально).</p>

<p>Для хранения фигур используйте <tt>std::vector</tt>. Для стабильной сортировки используйте <tt>stable_sort</tt>.</p>

<p>Не забывайте корректно освобождать всю динамическую память.</p>

<p>Реализуйте класс-фабрику классов для порождения объектов фигур.
Фабрика классов должна быть синглтоном.
Экземпляр синглтона должен возвращаться статической функцией
<tt>factory_instance</tt>.</p>

<p><b>Дополнительно:</b></p>

<p>Для автоматического освобождения памяти можете использовать <tt>std::unique_ptr</tt>.</p>

<p>Чтобы не использовать <tt>if</tt> для проверки типа реализуйте фабрику классов на основе
<tt>std::map</tt> и <tt>std::function</tt>.</p>